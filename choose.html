<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TCG</title>

<style>
    body {
        font-family: Arial, sans-serif;
        /* Use margin: 0; and min-height for full-screen background coverage */
        margin: 0; 
        min-height: 100vh; 

        background-image: url("frontback.jpg");
        background-size: cover;
        background-repeat: no-repeat; /* <-- Fixed */
        background-position: center;
    }

    .player-row {
        display: grid;
        grid-template-columns: 100px 150px 120px;
        column-gap: 15px;
        align-items: center;
        margin-bottom: 10px;

        background: rgba(255, 255, 255, 0.7); /* <-- Fixed */
        padding: 10px;
        border-radius: 8px; /* <-- FINAL FIX: Removed space '8 px' */
        width: 400px;
    }

    input {
        padding: 5px;
        font-size: 14px;
    }

    button {
        padding: 6px 12px;
        }
    .msg { color: green; font-size: 14px; margin-left: 5px; }
</style>

</head>
<body>

<h2>Players</h2>

<div class="player-row" id="row1">
    <span>Player 1:</span>
    <input type="text" id="UserInput1" maxlength="10">
    <button id="player1">Select</button>
    <span class="msg" id="player1m"></span>
</div>
<div class="player-row" id="row2">
    <span>Player 2:</span>
    <input type="text" id="UserInput2" maxlength="10">
    <button id="player2">Select</button>
    <span class="msg" id="player2m"></span>
</div>
<div class="player-row" id="row3">
    <span>Player 3:</span>
    <input type="text" id="UserInput3" maxlength="10">
    <button id="player3">Select</button>
    <span class="msg" id="player3m"></span>
</div>
<div class="player-row" id="row4">
    <span>Player 4:</span>
    <input type="text" id="UserInput4" maxlength="10">
    <button id="player4">Select</button>
    <span class="msg" id="player4m"></span>
</div>

<br>

<button id="btn2">Start Game</button>
<p id="msg"></p>


<!-- SAME JAVASCRIPT, UNCHANGED -->
<script>
// show only the number of players selected
window.onload = function() {
    const n = parseInt(localStorage.getItem("players")) || 2;
    for(let i=1;i<=4;i++){
        let row = document.getElementById("row"+i);
        if(i <= n) row.style.display = "grid";
        else row.style.display = "none";
    }
};

// player button event listeners
for(let i=1;i<=4;i++){
    const btn = document.getElementById("player"+i);
    if(btn){
        btn.addEventListener("click", async () => {
            const input = document.getElementById("UserInput"+i).value;
            const res = await fetch("/echo", {
                method:"POST",
                headers:{"Content-Type":"application/json"},
                body: JSON.stringify({message:input})
            });
            document.getElementById("player"+i+"m").innerText = await res.text();
        });
    }
}

// start game button
document.getElementById("btn2").addEventListener("click", async () => {
    const players=[];
    for(let i=1;i<=4;i++){
        const row = document.getElementById("row"+i);
        if(row.style.display!="none"){
            players.push(document.getElementById("UserInput"+i).value);
        }
    }
    const res = await fetch("/startgame", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body: JSON.stringify({players})
    });
    document.getElementById("msg").innerText = await res.text();
});
</script>

</body>
</html>
